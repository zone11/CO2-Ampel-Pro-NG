; PlatformIO Project Configuration File for CO2-Ampel Pro NG
;
; Documentation: https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = co2ampel_pro

[env]
; Common settings for all environments
platform = atmelsam
framework = arduino
monitor_speed = 9600
monitor_filters = direct
upload_protocol = sam-ba
lib_ldf_mode = deep+

; Custom board and variant paths
board_build.variants_dir = variants

; Common library dependencies
lib_deps =
    Wire
    SPI
    cmaglie/FlashStorage@^1.0.0
    sparkfun/SparkFun SCD30 Arduino Library@^1.0.20
    sensirion/Sensirion I2C SCD4x@^0.4.0
    adafruit/Adafruit BMP280 Library@^2.6.8
    arduino-libraries/Arduino_LPS22HB@^1.0.2
    adafruit/Adafruit NeoPixel@^1.12.0
    arduino-libraries/WiFi101@^0.16.1
    adafruit/Adafruit GFX Library@^1.11.9
    adafruit/Adafruit SSD1306@^2.5.9
    adafruit/Adafruit BusIO@^1.15.0
    adafruit/Adafruit Unified Sensor@^1.1.14

; Build flags common to all environments
build_flags =
    -DVERSION=\"26-NG\"
    -DCOVID=0
    -DARDUINO_SAMD_ZERO
    -D__SAMD21G18A__
    -DUSBCON
    -DUSB_VID=0x04D8
    -DUSB_PID=0xEACF
    -DUSB_PRODUCT=\"CO2-Ampel\"
    -DUSB_MANUFACTURER=\"Watterott\"
    -DCRYSTALLESS
    -DARM_MATH_CM0PLUS

; ============================================================
; CO2-Ampel Pro Configuration (WiFi + Pressure Sensor)
; ============================================================
[env:co2ampel_pro]
board = co2ampel
board_build.ldscript = variants/co2ampel/linker_scripts/gcc/flash_with_bootloader.ld
build_flags =
    ${env.build_flags}
    -DPRO_AMPEL=1
    -DWIFI_AMPEL=1

; ============================================================
; CO2-Ampel Pro (WiFi + Pressure + LoRa - Future)
; ============================================================
[env:co2ampel_pro_lora]
board = co2ampel
build_flags =
    ${env.build_flags}
    -DPRO_AMPEL=1
    -DWIFI_AMPEL=1
    -DLORA_ENABLED=0
lib_deps =
    ${env.lib_deps}
    ; LMIC library for LoRa (to be added when implementing)
    ; matthijskooijman/MCCI LoRaWAN LMIC library@^4.1.1

; ============================================================
; CO2-Ampel Basic Version (No WiFi, No Pressure)
; ============================================================
[env:co2ampel_basic]
board = co2ampel
build_flags =
    ${env.build_flags}
    -DPRO_AMPEL=0
    -DWIFI_AMPEL=0

; ============================================================
; CO2-Ampel Plus Version (WiFi, No Pressure)
; ============================================================
[env:co2ampel_plus]
board = co2ampel
build_flags =
    ${env.build_flags}
    -DPRO_AMPEL=0
    -DWIFI_AMPEL=1

; ============================================================
; Development Environment with Debug Output
; ============================================================
[env:co2ampel_debug]
board = co2ampel
build_flags =
    ${env.build_flags}
    -DPRO_AMPEL=1
    -DWIFI_AMPEL=1
    -DDEBUG_OUTPUT=1
build_type = debug
debug_tool = atmel-ice
debug_init_break = tbreak setup

; ============================================================
; COVID-19 Thresholds Version
; ============================================================
[env:co2ampel_covid]
board = co2ampel
build_flags =
    ${env.build_flags}
    -DPRO_AMPEL=1
    -DWIFI_AMPEL=1
    -DCOVID=1
